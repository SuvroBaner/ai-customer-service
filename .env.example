# ============================================================================
# AI Customer Service - Environment Configuration
# ============================================================================
#
# Copy this file to .env and fill in your actual values.
# Never commit .env to version control!
#
# Settings use double underscore (__) for nesting:
# LLM__CLAUDE__API_KEY means: llm.claude.api_key

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

APP_NAME=AI Customer Service
APP_VERSION=0.1.0
ENVIRONMENT=development  # development, staging, production
DEBUG=true
SECRET_KEY=change-me-in-production-use-a-random-string

# ============================================================================
# LLM CONFIGURATION
# ============================================================================

# LLM Provider: claude, openai, or both (claude primary, openai fallback)
LLM__PROVIDER=both
LLM__FALLBACK_ENABLED=true
LLM__MAX_RETRIES=3
LLM__RETRY_DELAY=1.0

# --- Anthropic Claude ---
LLM__CLAUDE__API_KEY=sk-ant-xxxxx
LLM__CLAUDE__MODEL=claude-sonnet-4-20250514
LLM__CLAUDE__MAX_TOKENS=4096
LLM__CLAUDE__TEMPERATURE=0.7
LLM__CLAUDE__TIMEOUT=60

# --- OpenAI ---
LLM__OPENAI__API_KEY=sk-xxxxx
LLM__OPENAI__MODEL=gpt-4-turbo-preview
LLM__OPENAI__MAX_TOKENS=4096
LLM__OPENAI__TEMPERATURE=0.7
LLM__OPENAI__TIMEOUT=60
LLM__OPENAI__EMBEDDING_MODEL=text-embedding-3-small
LLM__OPENAI__EMBEDDING_DIMENSIONS=1536

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# --- PostgreSQL ---
DATABASE__URL=postgresql+asyncpg://user:password@localhost:5432/customer_service
DATABASE__POOL_SIZE=10
DATABASE__MAX_OVERFLOW=20
DATABASE__POOL_TIMEOUT=30
DATABASE__ECHO=false  # Set to true to log all SQL (dev only)

# --- Redis ---
REDIS__URL=redis://localhost:6379/0
REDIS__MAX_CONNECTIONS=50
REDIS__SOCKET_TIMEOUT=5
REDIS__SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# VECTOR DATABASE CONFIGURATION
# ============================================================================

# Vector DB Provider: chromadb (local dev) or qdrant (production)
VECTOR_DB__PROVIDER=chromadb
VECTOR_DB__TOP_K=5
VECTOR_DB__SIMILARITY_THRESHOLD=0.7

# --- ChromaDB (Local Development) ---
VECTOR_DB__CHROMADB__PATH=./data/chroma
VECTOR_DB__CHROMADB__COLLECTION_NAME=customer_service_kb

# --- Qdrant (Production) ---
# Uncomment and configure for production:
# VECTOR_DB__QDRANT__URL=https://your-qdrant-instance.com
# VECTOR_DB__QDRANT__API_KEY=your-qdrant-api-key
# VECTOR_DB__QDRANT__COLLECTION_NAME=customer_service_kb
# VECTOR_DB__QDRANT__VECTOR_SIZE=1536

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================

AGENTS__ENABLE_ESCALATION=true
AGENTS__ESCALATION_THRESHOLD=0.8
AGENTS__MAX_RESOLUTION_ATTEMPTS=3
AGENTS__KNOWLEDGE_THRESHOLD=0.7
AGENTS__MAX_RESPONSE_LENGTH=500
AGENTS__REQUIRE_CITATIONS=true

# ============================================================================
# API CONFIGURATION
# ============================================================================

API__HOST=0.0.0.0
API__PORT=8000
API__WORKERS=4
API__RELOAD=true  # Auto-reload on code changes (dev only)

# CORS Settings
API__ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# Rate Limiting
API__RATE_LIMIT_PER_MINUTE=60
API__RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

LOGGING__LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGING__FORMAT=json  # json or text
LOGGING__LOG_FILE=  # Leave empty for stdout only

# Detailed Logging Flags
LOGGING__LOG_SQL=false
LOGGING__LOG_REQUESTS=true
LOGGING__LOG_LLM_CALLS=true

# ============================================================================
# EXTERNAL INTEGRATIONS (Optional)
# ============================================================================

# Uncomment and configure as needed:

# --- CRM Integration ---
# CRM_PROVIDER=salesforce
# CRM_API_KEY=xxxxx
# CRM_API_URL=https://api.salesforce.com

# --- Ticketing System ---
# TICKETING_PROVIDER=zendesk
# TICKETING_SUBDOMAIN=yourcompany
# TICKETING_API_KEY=xxxxx
# TICKETING_EMAIL=support@yourcompany.com

# --- Email Provider ---
# EMAIL_PROVIDER=sendgrid
# EMAIL_API_KEY=xxxxx
# EMAIL_FROM_ADDRESS=noreply@yourcompany.com

# --- Analytics ---
# ANALYTICS_ENABLED=true
# ANALYTICS_PROVIDER=segment
# ANALYTICS_WRITE_KEY=xxxxx

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# ENABLE_METRICS=true
# METRICS_PORT=9090
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
# DATADOG_API_KEY=xxxxx

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================

# Hot reload for prompts in development
DEV__HOT_RELOAD_PROMPTS=true

# Mock external APIs in development
DEV__MOCK_EXTERNAL_APIS=false

# Seed database with test data
DEV__SEED_DATABASE=true